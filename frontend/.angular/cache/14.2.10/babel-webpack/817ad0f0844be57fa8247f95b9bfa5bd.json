{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/marko/OneDrive/Desktop/PIA Projekat 2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { USER_TYPES } from '@shared/consts';\nimport User from '@shared/models/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/services/account.service\";\nimport * as i2 from \"@shared/services/util.service\";\n\nfunction RegistrationComponent_img_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 20);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.user.profile_picture, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction RegistrationComponent_ng_container_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\", 21)(2, \"td\", 0);\n    i0.ɵɵtext(3, \" Informacije o klijentu \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"tr\")(5, \"td\")(6, \"label\", 22);\n    i0.ɵɵtext(7, \"Ime*\\u00A0\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\")(9, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_ng_container_44_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.user.client.first_name = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"tr\")(11, \"td\")(12, \"label\", 24);\n    i0.ɵɵtext(13, \"Prezime*\\u00A0\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_ng_container_44_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.user.client.last_name = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.client.first_name);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.client.last_name);\n  }\n}\n\nfunction RegistrationComponent_ng_container_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\", 21)(2, \"td\", 0);\n    i0.ɵɵtext(3, \" Informacije o agenciji \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"tr\")(5, \"td\")(6, \"label\", 26);\n    i0.ɵɵtext(7, \"Naziv*\\u00A0\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\")(9, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_ng_container_45_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.user.agency.name = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"tr\")(11, \"td\")(12, \"label\", 28);\n    i0.ɵɵtext(13, \"Adresa*\\u00A0\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_ng_container_45_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.user.agency.address = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tr\")(17, \"td\")(18, \"label\", 30);\n    i0.ɵɵtext(19, \"Mati\\u010Dni broj*\\u00A0\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"td\")(21, \"input\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_ng_container_45_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.user.agency.id = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tr\")(23, \"td\")(24, \"label\", 32);\n    i0.ɵɵtext(25, \"Opis*\\u00A0\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"td\")(27, \"input\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_ng_container_45_Template_input_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.user.agency.description = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.user.agency.name);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.user.agency.address);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.user.agency.id);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.user.agency.description);\n  }\n}\n\nfunction RegistrationComponent_p_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const error_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(error_r13);\n  }\n}\n\nfunction RegistrationComponent_p_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(message_r14);\n  }\n}\n\nexport class RegistrationComponent {\n  constructor(accountService, utilService) {\n    this.accountService = accountService;\n    this.utilService = utilService;\n    this.user = new User();\n    this.password_confirmation = \"\";\n    this.errors = [];\n    this.messages = [];\n  }\n\n  get USER_TYPES() {\n    return USER_TYPES;\n  }\n\n  set_profile_picture(event) {\n    this.utilService.image_file_to_base64(event.target.files[0]).then(image => {\n      this.user.profile_picture = image;\n    });\n  }\n\n  change_user_type() {\n    this.user.type = this.user.type == USER_TYPES.client ? this.USER_TYPES.agency : this.USER_TYPES.client;\n  }\n\n  register() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.errors = [];\n      _this.messages = [];\n\n      if (_this.user.password.localeCompare(_this.password_confirmation) != 0) {\n        _this.errors.push('Lozinke se ne poklapaju.');\n\n        return;\n      }\n\n      yield _this.accountService.register(_this.user).then(() => _this.messages.push('Zahtev za registracijom je uspešno poslat.'), error => _this.errors = error.error);\n    })();\n  }\n\n}\n\nRegistrationComponent.ɵfac = function RegistrationComponent_Factory(t) {\n  return new (t || RegistrationComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.UtilService));\n};\n\nRegistrationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistrationComponent,\n  selectors: [[\"app-registration\"]],\n  decls: 50,\n  vars: 11,\n  consts: [[\"colspan\", \"2\", 2, \"text-align\", \"center\"], [3, \"click\"], [2, \"border-top\", \"8px solid transparent\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"id\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\"], [\"type\", \"text\", \"name\", \"password\", \"id\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password_confirmation\"], [\"type\", \"text\", \"name\", \"password_confirmation\", \"id\", \"password_confirmation\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"phone_number\"], [\"type\", \"text\", \"name\", \"phone_number\", \"id\", \"phone_number\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"email\"], [\"type\", \"text\", \"name\", \"email\", \"id\", \"email\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"profile_picture\"], [\"id\", \"profile_picture\", \"alt\", \"profilna slika\", 3, \"src\", 4, \"ngIf\"], [\"type\", \"file\", \"accept\", \".png, .jpg, .jpeg\", \"name\", \"profile_picture_change\", \"id\", \"profile_picture_change\", 3, \"change\"], [4, \"ngIf\"], [\"class\", \"errors\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"messages\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"button_register\", 3, \"click\"], [\"id\", \"profile_picture\", \"alt\", \"profilna slika\", 3, \"src\"], [2, \"border\", \"8px solid transparent\"], [\"for\", \"first_name\"], [\"type\", \"text\", \"name\", \"first_name\", \"id\", \"first_name\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"last_name\"], [\"type\", \"text\", \"name\", \"last_name\", \"id\", \"last_name\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"name\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"address\"], [\"type\", \"text\", \"name\", \"address\", \"id\", \"address\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"id\"], [\"type\", \"text\", \"name\", \"id\", \"id\", \"id\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"type\", \"text\", \"name\", \"description\", \"id\", \"description\", 3, \"ngModel\", \"ngModelChange\"], [1, \"errors\"], [1, \"messages\"]],\n  template: function RegistrationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\")(1, \"tr\")(2, \"td\", 0)(3, \"span\");\n      i0.ɵɵtext(4, \"Tip korisnika: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function RegistrationComponent_Template_button_click_5_listener() {\n        return ctx.change_user_type();\n      });\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"tr\", 2)(8, \"td\")(9, \"label\", 3);\n      i0.ɵɵtext(10, \"Korisni\\u010Dko ime*\\u00A0\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"td\")(12, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.user.username = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"tr\")(14, \"td\")(15, \"label\", 5);\n      i0.ɵɵtext(16, \"Lozinka*\\u00A0\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"td\")(18, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_Template_input_ngModelChange_18_listener($event) {\n        return ctx.user.password = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"tr\")(20, \"td\")(21, \"label\", 7);\n      i0.ɵɵtext(22, \"Potvrda lozinke*\\u00A0\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"td\")(24, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.password_confirmation = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"tr\", 2)(26, \"td\")(27, \"label\", 9);\n      i0.ɵɵtext(28, \"Kontakt telefon*\\u00A0\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"td\")(30, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.user.phone_number = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"tr\")(32, \"td\")(33, \"label\", 11);\n      i0.ɵɵtext(34, \"I-mejl*\\u00A0\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"td\")(36, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistrationComponent_Template_input_ngModelChange_36_listener($event) {\n        return ctx.user.email = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(37, \"tr\", 2)(38, \"td\")(39, \"label\", 13);\n      i0.ɵɵtext(40, \"Profilna slika\\u00A0\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"td\");\n      i0.ɵɵtemplate(42, RegistrationComponent_img_42_Template, 1, 1, \"img\", 14);\n      i0.ɵɵelementStart(43, \"input\", 15);\n      i0.ɵɵlistener(\"change\", function RegistrationComponent_Template_input_change_43_listener($event) {\n        return ctx.set_profile_picture($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(44, RegistrationComponent_ng_container_44_Template, 16, 2, \"ng-container\", 16);\n      i0.ɵɵtemplate(45, RegistrationComponent_ng_container_45_Template, 28, 4, \"ng-container\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(46, RegistrationComponent_p_46_Template, 2, 1, \"p\", 17);\n      i0.ɵɵtemplate(47, RegistrationComponent_p_47_Template, 2, 1, \"p\", 18);\n      i0.ɵɵelementStart(48, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function RegistrationComponent_Template_button_click_48_listener() {\n        return ctx.register();\n      });\n      i0.ɵɵtext(49, \"Registruj se\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", ctx.user.type == ctx.USER_TYPES.client ? \"Klijent\" : ctx.user.type == ctx.USER_TYPES.agency ? \"Agencija\" : \"???\", \" \");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.username);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.password_confirmation);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.phone_number);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.email);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.user.profile_picture);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.user.type == ctx.USER_TYPES.client);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.user.type == ctx.USER_TYPES.agency);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.errors);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n    }\n  },\n  styles: [\"table[_ngcontent-%COMP%] {\\r\\n    border-collapse: collapse;\\r\\n    margin: 0 auto 8px auto;\\r\\n}\\r\\n\\r\\n#register_button[_ngcontent-%COMP%] {\\r\\n    display: block;\\r\\n    margin: 8px auto 0 auto;\\r\\n}\\r\\n\\r\\n.errors[_ngcontent-%COMP%], .messages[_ngcontent-%COMP%] {\\r\\n    margin: 0;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.errors[_ngcontent-%COMP%] {\\r\\n    color: red;\\r\\n}\\r\\n\\r\\n.messages[_ngcontent-%COMP%] {\\r\\n    color: green;\\r\\n}\\r\\n\\r\\n#profile_picture_change[_ngcontent-%COMP%], #profile_picture[_ngcontent-%COMP%] {\\r\\n    max-width: var(--form-input-width);\\r\\n\\r\\n    display: block;\\r\\n    margin: 0 auto;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdHJhdGlvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kseUJBQXlCO0lBQ3pCLHVCQUF1QjtBQUMzQjs7QUFFQTtJQUNJLGNBQWM7SUFDZCx1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSxTQUFTO0lBQ1Qsa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksVUFBVTtBQUNkOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTs7SUFFSSxrQ0FBa0M7O0lBRWxDLGNBQWM7SUFDZCxjQUFjO0FBQ2xCIiwiZmlsZSI6InJlZ2lzdHJhdGlvbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUge1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICAgIG1hcmdpbjogMCBhdXRvIDhweCBhdXRvO1xyXG59XHJcblxyXG4jcmVnaXN0ZXJfYnV0dG9uIHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgbWFyZ2luOiA4cHggYXV0byAwIGF1dG87XHJcbn1cclxuXHJcbi5lcnJvcnMsIC5tZXNzYWdlcyB7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5lcnJvcnMge1xyXG4gICAgY29sb3I6IHJlZDtcclxufVxyXG5cclxuLm1lc3NhZ2VzIHtcclxuICAgIGNvbG9yOiBncmVlbjtcclxufVxyXG5cclxuI3Byb2ZpbGVfcGljdHVyZV9jaGFuZ2UsXHJcbiNwcm9maWxlX3BpY3R1cmUge1xyXG4gICAgbWF4LXdpZHRoOiB2YXIoLS1mb3JtLWlucHV0LXdpZHRoKTtcclxuXHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIG1hcmdpbjogMCBhdXRvO1xyXG59XHJcbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["USER_TYPES","User","i0","RegistrationComponent","constructor","accountService","utilService","set_profile_picture","event","image_file_to_base64","target","files","then","image","user","profile_picture","change_user_type","type","client","agency","register","errors","messages","password","localeCompare","password_confirmation","push","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\marko\\OneDrive\\Desktop\\PIA Projekat 2\\frontend\\src\\app\\features\\account\\registration\\registration.component.ts","C:\\Users\\marko\\OneDrive\\Desktop\\PIA Projekat 2\\frontend\\src\\app\\features\\account\\registration\\registration.component.html"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\n\nimport { USER_TYPES } from '@shared/consts';\nimport User from '@shared/models/user';\nimport { AccountService } from '@shared/services/account.service';\nimport { UtilService } from '@shared/services/util.service';\n\n@Component({\n  selector: 'app-registration',\n  templateUrl: './registration.component.html',\n  styleUrls: ['./registration.component.css']\n})\nexport class RegistrationComponent {\n\n  public get USER_TYPES() {\n    return USER_TYPES; \n  }\n\n  user: User = new User();\n  password_confirmation: string = \"\";\n\n  errors: string[] = [];\n  messages: string[] = [];\n\n  constructor(private accountService: AccountService, private utilService: UtilService) { }\n\n  set_profile_picture(event) {\n    this.utilService.image_file_to_base64(event.target.files[0]).then(\n      (image: string) => {\n        this.user.profile_picture = image;\n      }\n    );\n  }\n\n  change_user_type() {\n    this.user.type = this.user.type == USER_TYPES.client ? this.USER_TYPES.agency : this.USER_TYPES.client;\n  }\n\n  async register() {\n    this.errors = [];\n    this.messages = [];\n\n    if (this.user.password.localeCompare(this.password_confirmation) != 0) {\n      this.errors.push('Lozinke se ne poklapaju.');\n      return;\n    }\n\n    await this.accountService.register(this.user).then(\n      () => this.messages.push('Zahtev za registracijom je uspešno poslat.'),\n      (error: HttpErrorResponse) => this.errors = error.error\n    );\n  }\n\n}\n","<table>\n    <tr>\n        <td colspan=\"2\" style=\"text-align: center\">\n            <span>Tip korisnika: </span>\n            <button (click)=\"change_user_type()\">\n                {{ user.type == USER_TYPES.client ? 'Klijent' : (user.type == USER_TYPES.agency ? 'Agencija' : '???') }}\n            </button>\n        </td>\n    </tr>\n\n    <tr style=\"border-top: 8px solid transparent\">\n        <td>\n            <label for=\"username\">Korisničko ime*&nbsp;</label>\n        </td>\n        <td>\n            <input type=\"text\" name=\"username\" id=\"username\" [(ngModel)]=\"user.username\" />\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label for=\"password\">Lozinka*&nbsp;</label>\n        </td>\n        <td>\n            <input type=\"text\" name=\"password\" id=\"password\" [(ngModel)]=\"user.password\" />\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label for=\"password_confirmation\">Potvrda lozinke*&nbsp;</label>\n        </td>\n        <td>\n            <input type=\"text\" name=\"password_confirmation\" id=\"password_confirmation\" [(ngModel)]=\"password_confirmation\" />\n        </td>\n    </tr>\n\n    <tr style=\"border-top: 8px solid transparent\">\n        <td>\n            <label for=\"phone_number\">Kontakt telefon*&nbsp;</label>\n        </td>\n        <td>\n            <input type=\"text\" name=\"phone_number\" id=\"phone_number\" [(ngModel)]=\"user.phone_number\" />\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label for=\"email\">I-mejl*&nbsp;</label>\n        </td>\n        <td>\n            <input type=\"text\" name=\"email\" id=\"email\" [(ngModel)]=\"user.email\" />\n        </td>\n    </tr>\n\n    <tr style=\"border-top: 8px solid transparent\">\n        <td>\n            <label for=\"profile_picture\">Profilna slika&nbsp;</label>\n        </td>\n        <td>\n            <img *ngIf=\"user.profile_picture\" id=\"profile_picture\" [src]=\"user.profile_picture\" alt=\"profilna slika\" />\n            <input type=\"file\" accept=\".png, .jpg, .jpeg\" name=\"profile_picture_change\" id=\"profile_picture_change\"\n                (change)=\"set_profile_picture($event)\" />\n        </td>\n    </tr>\n\n    <ng-container *ngIf=\"user.type == USER_TYPES.client\">\n        <tr style=\"border: 8px solid transparent\">\n            <td colspan=\"2\" style=\"text-align: center\">\n                Informacije o klijentu\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for=\"first_name\">Ime*&nbsp;</label>\n            </td>\n            <td>\n                <input type=\"text\" name=\"first_name\" id=\"first_name\" [(ngModel)]=\"user.client.first_name\" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for=\"last_name\">Prezime*&nbsp;</label>\n            </td>\n            <td>\n                <input type=\"text\" name=\"last_name\" id=\"last_name\" [(ngModel)]=\"user.client.last_name\" />\n            </td>\n        </tr>\n    </ng-container>\n\n    <ng-container *ngIf=\"user.type == USER_TYPES.agency\">\n        <tr style=\"border: 8px solid transparent\">\n            <td colspan=\"2\" style=\"text-align: center\">\n                Informacije o agenciji\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for=\"name\">Naziv*&nbsp;</label>\n            </td>\n            <td>\n                <input type=\"text\" name=\"name\" id=\"name\" [(ngModel)]=\"user.agency.name\" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for=\"address\">Adresa*&nbsp;</label>\n            </td>\n            <td>\n                <input type=\"text\" name=\"address\" id=\"address\" [(ngModel)]=\"user.agency.address\" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for=\"id\">Matični broj*&nbsp;</label>\n            </td>\n            <td>\n                <input type=\"text\" name=\"id\" id=\"id\" [(ngModel)]=\"user.agency.id\" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for=\"description\">Opis*&nbsp;</label>\n            </td>\n            <td>\n                <input type=\"text\" name=\"description\" id=\"description\" [(ngModel)]=\"user.agency.description\" />\n            </td>\n        </tr>\n    </ng-container>\n</table>\n\n<p class=\"errors\" *ngFor=\"let error of errors\">{{ error }}</p>\n\n<p class=\"messages\" *ngFor=\"let message of messages\">{{ message }}</p>\n\n<button id=\"button_register\" (click)=\"register()\">Registruj se</button>\n"]},"metadata":{},"sourceType":"module"}